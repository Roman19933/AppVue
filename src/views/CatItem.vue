<template>
  <div>
    <div class="products">
      <div class="up-btn">
        <img src="img/up.png" alt />
      </div>
      <div class="products__left">
        <button class="products__left-close">
          <svg class="icon-svg icon-svg-close-modal close-filter">
            <use xlink:href="img/sprite.svg#close-modal" />
          </svg>
        </button>
        <form action="#">
          <div class="products__filter">
            <div class="products__filter-title">
              <h2>Фильтр по каталогу</h2>
            </div>
            <div class="products__filter-item">
              <a href="#" class="products__filter-item__title preventDefault">
                <svg class="icon-svg icon-svg-arrow filter-arrow">
                  <use xlink:href="img/sprite.svg#arrow" />
                </svg>
                <span>Горошки для цветов</span>
              </a>
              <div class="products__filter-content">
                <ul>
                  <li>
                    <div class="products__filter-item">
                      <a href="#" class="products__filter-item__title preventDefault">
                        <svg class="icon-svg icon-svg-arrow filter-arrow">
                          <use xlink:href="img/sprite.svg#arrow" />
                        </svg>
                        <span>Горошки для цветов</span>
                      </a>
                      <div class="products__filter-content">
                        <ul>
                          <li>
                            <a href="#" class="active">Баклажаны</a>
                          </li>
                          <li>
                            <a href="#">Бобы</a>
                          </li>
                          <li>
                            <a href="#">Брюква</a>
                          </li>
                          <li>
                            <a href="#">сельскохозяйственные</a>
                          </li>
                          <li>
                            <a href="#">салаты</a>
                          </li>
                          <li>
                            <a href="#">сельдерей</a>
                          </li>
                          <li>
                            <a href="#">лук</a>
                          </li>
                          <li>
                            <a href="#">шпинат</a>
                          </li>
                          <li>
                            <a href="#">щавель</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="products__filter-item">
              <a href="#" class="products__filter-item__title preventDefault">
                <svg class="icon-svg icon-svg-arrow filter-arrow">
                  <use xlink:href="img/sprite.svg#arrow" />
                </svg>
                <span>Горошки для зассады</span>
              </a>
              <div class="products__filter-content">
                <ul>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="products__filter-item">
              <a href="#" class="products__filter-item__title preventDefault">
                <svg class="icon-svg icon-svg-arrow filter-arrow">
                  <use xlink:href="img/sprite.svg#arrow" />
                </svg>
                <span>Хозяйственные товары</span>
              </a>
              <div class="products__filter-content">
                <ul>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="products__filter-item">
              <a href="#" class="products__filter-item__title preventDefault">
                <svg class="icon-svg icon-svg-arrow filter-arrow">
                  <use xlink:href="img/sprite.svg#arrow" />
                </svg>
                <span>Миниральные удобрения</span>
              </a>
              <div class="products__filter-content">
                <ul>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="products__filter-item">
              <a href="#" class="products__filter-item__title preventDefault">
                <svg class="icon-svg icon-svg-arrow filter-arrow">
                  <use xlink:href="img/sprite.svg#arrow" />
                </svg>
                <span>Органические удобрение и почвы</span>
              </a>
              <div class="products__filter-content">
                <ul>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="products__filter-item">
              <a href="#" class="products__filter-item__title preventDefault">
                <svg class="icon-svg icon-svg-arrow filter-arrow">
                  <use xlink:href="img/sprite.svg#arrow" />
                </svg>
                <span>Пакетированные семена</span>
              </a>
              <div class="products__filter-content">
                <ul>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                  <li>
                    <a href="#">Баклажаны</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="products__filter">
            <div class="products__filter-title">
              <h2>Сортировать по массе</h2>
            </div>
            <div class="products__filter-content products__filter-content_btn">
              <div class="products__filter-radio">
                <label class="radio">
                  <input type="checkbox" class="radio__input" />
                  <span class="radio__custom"></span>
                  <span class="radio__text">Сначала дороже</span>
                </label>
              </div>
              <div class="products__filter-radio">
                <label class="radio">
                  <input type="checkbox" class="radio__input" />
                  <span class="radio__custom"></span>
                  <span class="radio__text">Сначала дешевле</span>
                </label>
              </div>
            </div>
          </div>
          <div class="products__filter">
            <div class="products__filter-title">
              <h2>Сортировать по серии</h2>
            </div>
            <div class="products__filter-content products__filter-content_btn">
              <div class="products__filter-radio">
                <label class="radio">
                  <input type="checkbox" class="radio__input" />
                  <span class="radio__custom"></span>
                  <span class="radio__text">По спаданию</span>
                </label>
              </div>
              <div class="products__filter-radio">
                <label class="radio">
                  <input type="checkbox" class="radio__input" />
                  <span class="radio__custom"></span>
                  <span class="radio__text">По возрастанию</span>
                </label>
              </div>
            </div>
          </div>
          <div class="products__filter">
            <div class="products__filter-title">
              <h2>Сортировать по длине</h2>
            </div>
            <div class="products__filter-content products__filter-content_btn">
              <div class="products__filter-radio">
                <label class="radio">
                  <input type="checkbox" class="radio__input" />
                  <span class="radio__custom"></span>
                  <span class="radio__text">По спаданию</span>
                </label>
              </div>
              <div class="products__filter-radio">
                <label class="radio">
                  <input type="checkbox" class="radio__input" />
                  <span class="radio__custom"></span>
                  <span class="radio__text">По возрастанию</span>
                </label>
              </div>
            </div>
          </div>
          <button type="submit" class="button button__filter">Сбросить фильтр</button>
        </form>
      </div>
      <div class="products__wrapper">
        <!-- <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Главная</a></li>
                <li class="breadcrumb-item active" aria-current="page">Сброс пароля</li>
            </ol>
        </nav>-->
        <div class="products__right padding">
          <div class="products__title title">
            <h2>Товары</h2>
            <div class="products__filters">
              <a href="#" class="click-sort">
                <svg class="icon-svg icon-svg-filter filter">
                  <use xlink:href="../assets/img/sprite.svg#filter" />
                </svg>
                <span>Фильтры и сортировка</span>
              </a>
              <div class="dropdown">
                <!-- <button
                  class="dropdown__btn dropdown-toggle"
                  type="button"
                  id="dropdownMenuButton"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >Сортировать ...</button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">По умолчанию</a>
                  <a class="dropdown-item" href="#">
                    Название
                    <svg class="icon-svg icon-svg-arrow-up drop-arrow">
                      <use xlink:href="img/sprite.svg#arrow-up" />
                    </svg>
                  </a>
                  <a class="dropdown-item" href="#">
                    Название
                    <svg class="icon-svg icon-svg-arrow-down drop-arrow">
                      <use xlink:href="img/sprite.svg#arrow-down" />
                    </svg>
                  </a>
                  <a class="dropdown-item" href="#">
                    Цена
                    <svg class="icon-svg icon-svg-arrow-up drop-arrow">
                      <use xlink:href="img/sprite.svg#arrow-up" />
                    </svg>
                  </a>
                  <a class="dropdown-item" href="#">
                    Цена
                    <svg class="icon-svg icon-svg-arrow-down drop-arrow">
                      <use xlink:href="img/sprite.svg#arrow-down" />
                    </svg>
                  </a>
                </div>-->
                <!-- <input type="text" class="dropdown__btn" /> -->
                <!-- <select v-model="filter" class="dropdown__btn">
                  <option
                    class="dropdown-item"
                    v-for="(item,index) in filterList"
                    :key="index"
                  >{{item}}</option>
                </select> -->
                <!-- <b-dropdown id="dropdown-1" text="Сортировать..." class="dropdown__btn">
                  <b-dropdown-item v-for="(item,index) in filterList" :key="index">{{item}}</b-dropdown-item>
                </b-dropdown>-->
              <v-select 
              v-model="filter" 
              :options="filterList"
              class="filterDropdown"
              ></v-select>
              </div>
            </div>
          </div>
          <div class="min-count">
            <p>
              Мин. сумма заказа -
              <span>300</span> грн.
            </p>
          </div>
          <div class="products__items">
            <cardProduct v-for="(item,index) in getProductToCategory" :key="index" :product="item" />
          </div>
        </div>
        <div class="home__seo default-container">
          <p>
            Не следует, однако забывать, что реализация намеченных плановых заданий обеспечивает широкому кругу
            (специалистов) участие в формировании существенных финансовых и административных условий. Повседневная
            практика показывает
          </p>
        </div>
        <!-- <pre>{{this.getProducts}}</pre> -->
        <!-- <pre>{{this.getCategories}}</pre>
        <pre>{{this.getNameToCategory}}</pre>-->
        <!-- <pre>{{this.getProductToCategory}}</pre> -->
        <!-- <pre>{{this.getProductToCategory}}</pre> -->
      </div>
    </div>
  </div>
</template>

<script>
import { mapGetters, mapActions } from "vuex";
import cardProduct from "../components/loyauts/card/cardProduct";
export default {
  data() {
    return {
      //   id: this.$route.params.id
      filterList: ["От A-Z", "От Z-A", "По возростанию", "По спаданию"],
      filter: "Сортировать..."
    };
  },
  components: {
    cardProduct
  },
  watch: {
    filter: function(val) {
      if (val == "От A-Z") {
        this.getProductToCategory.sort((a, b) => a.name.localeCompare(b.name));
      } else if (val == "От Z-A") {
        this.getProductToCategory.sort((a, b) => b.name.localeCompare(a.name));
      } else if (val == "По возростанию") {
        console.log("ok");
        this.getProductToCategory.sort((a, b) => a.newPrice - b.newPrice);
      } else if (val == "По спаданию") {
        console.log("ok");
        this.getProductToCategory.sort((a, b) => b.newPrice - a.newPrice);
      }
    }
  },
  computed: {
    ...mapGetters(["getProducts"]),
    // getNameToCategory: function() {
    //   return this.getCategories.filter(item => {
    //     if (item.linkName === this.$route.params.id) {
    //       return item;
    //     }
    //   });
    // },
    // filter: function() {
    //   switch (this.filter) {
    //     case "От A-Z":
    //       this.getProductToCategory.sort((a, b) =>
    //         a.name.localeCompare(b.name)
    //       );
    //       console.log("ok");
    //   }
    // },
    getProductToCategory: function() {
      return this.getProducts.filter(item => {
        if (item.categoryLink == this.$route.params.id) {
          return item;
        }
      });
      console.log(this.getProductToCategory.length);
    }
  },
  mounted() {
    this.$store.dispatch("getProductsAction");
    // this.$store.dispatch("getCategoriesAction");
    // this.$store.dispatch("getProductToCategoryAction", this.get[0].name);
    // console.log(this.getNameToCategory[0].name);
  },
  methods: {}
};
</script>

<style lang="scss" >
.dropdown {
    width: 211px;
    height: 34px;
};
  .filterDropdown {
    // .vs__dropdown-toggle {
    //   border: 1px solid #b8adab;
    //   border-radius: 15px;
    //   font-size: 15px;
    //   padding: 5px 25px;
    //   display: flex;
    //   justify-content: space-between;
    //   align-items: center;
    // }
    height: 100%;
    .vs {
      &__dropdown {
        &-toggle {
          cursor:pointer;
          border: 1px solid #b8adab;
          border-radius: 15px;
          font-size: 15px;
          padding: 5px 5px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          height: 100%;
        }
        &-menu {
          border-radius:15px;
          padding:15px 15px;
          top:35px;
          box-shadow:none;
          border-top-style:solid;
        }
        &-option {
          font-size:15px;
          font-family:'Helvetica-Regular';
          padding:0;
          margin-bottom:15px;
          &--highlight {
            background:none;
            color:#B1C962;
            transition:.3s;
          }
        }
      }
      &__selected {
        font-size:15px;
        margin:0;
        &-options {
          flex-wrap:nowrap;
        }
      }
      &__clear {
        display:none;
      }
      &__search {
          pointer-events: none;
        &:focus {
          font-size:15px;
        }
      }
      &__open {
        &-indicator {
          // width:11px;
          // height:5px;
        }
      }
    }
  }
</style>
